import{$a as p,Mb as r,Nb as c,Ob as l,wb as m,xb as u,yb as v}from"./chunk-2C2P2UZ5.js";function g(s,t,e){return Math.min(e,Math.max(t,s))}var i=class{canvas;ctx;scale=1;minScale=.25;maxScale=4;offsetX=0;offsetY=0;constructor(t,e){this.canvas=t,this.ctx=e}onPointerDown(t){console.log(t),t.ctrlKey&&t.button==0}onPointerUp(t){console.log(t)}onPointerMove(t){console.log(t)}onWheel(t){t.preventDefault();let e=this.canvas.getBoundingClientRect(),o=this.canvas.width/e.width,n=this.canvas.height/e.height;if(console.log(t.ctrlKey),t.ctrlKey||t.metaKey){let w=-t.deltaY*.015,a=g(this.scale*(1+w),this.minScale,this.maxScale);if(a===this.scale)return;let d=(t.clientX-e.left)*o,f=(t.clientY-e.top)*n,h=a/this.scale;this.offsetX=d-h*(d-this.offsetX),this.offsetY=f-h*(f-this.offsetY),this.scale=a}let b=t.deltaX*o,C=t.deltaY*n;this.offsetX-=b,this.offsetY-=C}testShape(){this.ctx.fillRect(0,0,100,100),this.ctx.fillStyle="#000"}redraw(){let t=this.ctx;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,this.canvas.width,this.canvas.height),t.setTransform(this.scale,0,0,this.scale,this.offsetX,this.offsetY),t.lineWidth=2/this.scale,t.font=`${14/this.scale}px system-ui`,t.textAlign="center",t.textBaseline="middle",this.testShape()}};var y=["canvas"],M=["textInput"],x=class s{canvasRef;textInputRef;ctx;canvas;canvasBuilder;ngAfterViewInit(){this.canvas=this.canvasRef.nativeElement,this.ctx=this.canvas.getContext("2d"),this.canvasBuilder=new i(this.canvas,this.ctx),this.draw()}draw(){this.ctx.fillRect(0,0,100,100),this.ctx.fillStyle="#000"}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=p({type:s,selectors:[["app-drawing-board"]],viewQuery:function(e,o){if(e&1&&(r(y,7),r(M,5)),e&2){let n;c(n=l())&&(o.canvasRef=n.first),c(n=l())&&(o.textInputRef=n.first)}},decls:4,vars:0,consts:[["canvas",""],[1,"board-wrapper"],[1,"canvas-container"],["width","1200","height","700"]],template:function(e,o){e&1&&(m(0,"div",1)(1,"div",2),v(2,"canvas",3,0),u()())},styles:[".board-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;width:100%;height:100%}.toolbar[_ngcontent-%COMP%]{display:flex;gap:.5rem}.toolbar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.35rem .8rem;border-radius:.375rem;border:1px solid #d1d5db;background:#f9fafb;font-size:.85rem;cursor:pointer}.toolbar[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{border-color:#2563eb;background:#eff6ff;color:#1d4ed8}.canvas-container[_ngcontent-%COMP%]{position:relative;border-radius:.5rem;overflow:hidden;border:1px solid #e5e7eb;background:#fff}.canvas-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:block;width:100%;height:100%;cursor:crosshair}.text-editor[_ngcontent-%COMP%]{position:fixed;transform:translate(-50%,-50%);min-width:160px;padding:2px 6px;font:14px system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;border-radius:4px;border:1px solid #2563eb;outline:none;box-shadow:0 0 0 1px #2563eb33}"]})};export{x as DrawingBoard};
