import{a as V,b as B,c as L,d as N,e as U,f as q,g as z,h as W,i as G,j as J,k as Q,l as X}from"./chunk-BFUCISC4.js";import{B as K}from"./chunk-YGHRFECZ.js";import{a as Y}from"./chunk-O5EWAHD6.js";import{a as $,g as O,h as P}from"./chunk-JEIDM252.js";import"./chunk-IUR5LZKD.js";import{e as H,h as F}from"./chunk-Y3SXRRHJ.js";import{$ as w,$a as E,Ab as x,Cb as T,Gb as A,Ib as n,Na as a,R as I,Tb as l,V as u,Va as m,Vb as _,a as y,aa as D,b as g,eb as C,fc as j,nb as M,ob as R,pb as S,qb as k,rb as b,sb as d,tb as c,ub as s,vb as f,zb as v}from"./chunk-2C2P2UZ5.js";var h=class e{constructor(r,t){this.http=r;this.authManager=t}list(r){return this.http.get(O+"record/"+r).toPromise().then(t=>t.map(i=>i))}static \u0275fac=function(t){return new(t||e)(u(F),u(P))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})};function ie(e,r){if(e&1&&(c(0,"th",7),l(1),s()),e&2){let t=n().$implicit;a(),_(" ",t," ")}}function re(e,r){if(e&1){let t=T();c(0,"button",10),A("click",function(){w(t);let o=n().$implicit,p=n(2);return D(p.checkInUser(o.id))}),l(1," Check-in user "),s()}}function ne(e,r){if(e&1&&l(0),e&2){let t=n().$implicit,i=n().$implicit;_(" ",t[i].join(", ")," ")}}function oe(e,r){if(e&1&&l(0),e&2){let t=n().$implicit,i=n().$implicit;_(" ",t[i]," ")}}function ae(e,r){if(e&1&&(c(0,"td",8),M(1,re,2,0,"button",9)(2,ne,1,1)(3,oe,1,1),s()),e&2){let t=r.$implicit,i=n().$implicit,o=n();a(),R(i==="actions"?1:o.Array.isArray(t[i])?2:3)}}function ce(e,r){if(e&1&&(v(0,2),C(1,ie,2,1,"th",5)(2,ae,4,1,"td",6),x()),e&2){let t=r.$implicit;d("matColumnDef",t)}}function se(e,r){e&1&&f(0,"tr",11)}function le(e,r){e&1&&f(0,"tr",12)}var Z=class e{constructor(r,t,i,o){this.entryService=r;this.cdr=t;this.ar=i;this.recordService=o;this.read(this.ar.snapshot.queryParamMap.get("id")??"")}formId="";records=[];headers=[];read(r){this.formId=r,this.entryService.list(this.formId).then(t=>{if(this.records=t.map(i=>g(y({id:i.id},i.record??{}),{checkedIn:i.checkedIn??!1?"\u2713":"",checkedInAt:new H("en").transform(i.checkedInAt??null,"medium")})),this.records.length>0){let i=this.records.reduce((o,p)=>Object.keys(p).length>Object.keys(o).length?p:o);this.headers=Object.keys(i),this.headers.splice(this.headers.indexOf("id"),1),this.headers.push("actions")}else this.headers=[];this.cdr.detectChanges()})}checkInUser(r){console.log(r),this.recordService.checkIn(r).then(t=>window.location.reload())}Array=Array;static \u0275fac=function(t){return new(t||e)(m(h),m(j),m($),m(Y))};static \u0275cmp=E({type:e,selectors:[["app-entries"]],decls:9,vars:3,consts:[["matListItemTitle",""],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],[3,"matColumnDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell",""],["mat-cell",""],["mat-raised-button","","color","primary"],["mat-raised-button","","color","primary",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,i){t&1&&(v(0),c(1,"h2",0),l(2," Records "),s(),f(3,"mat-divider"),c(4,"table",1),k(5,ce,3,1,"ng-container",2,S),C(7,se,1,0,"tr",3)(8,le,1,0,"tr",4),s(),x()),t&2&&(a(4),d("dataSource",i.records),a(),b(i.headers),a(2),d("matHeaderRowDef",i.headers),a(),d("matRowDefColumns",i.headers))},dependencies:[Q,X,V,U,L,q,B,N,G,J,z,W,K],encapsulation:2})};export{Z as Entries};
